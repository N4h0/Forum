
@{
    ViewData["Title"] = "Home Page";
    // Importerer nødvendige avhengigheter
    @using Microsoft.AspNetCore.Identity
    @inject SignInManager<IdentityUser> SignInManager
    @inject UserManager<IdentityUser> UserManager
}

@model PostListViewModel


<!DOCTYPE html>
<html lang="en">
<head>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@300&display=swap" rel="stylesheet">

</head>
<body>


    <!-- THIS IS WHAT WE'RE TALKING ABOUT NOW start -->
    <div class="container mt-5">
        <div class="row">
            <div class="col-md-8">
                <div class="section-talking-title">
                    <h3>What we're talking about now</h3>
                    <hr class="custom-line" />
                </div>
                <ul class="list-unstyled">
                    @if (Model != null)
                    {
                        @foreach (var post in Model.Posts)
                        {
                            <div class="all-post">
                                <div class="row row-content">
                                    <div class="col-md-7">
                                        <a href="@Url.Action("PostDetails", "Post", new { id = post.PostId })">@post.PostTitle</a>
                                    </div>
                                    <div class="col-md-3">
                                        <small class="text-muted">@post.LatestComment.UserName<BR></small>
                                    </div>
                                    <div class="col-md-2 text-right">
                                        @{
                                            // Get the post creation time from the model
                                            var postTime = post.PostTime;

                                            // Call the FormatTime helper function to format the time
                                            var time = FormatTime(postTime);
                                        }
                                        <p>@time</p>
                                    </div>
                                
                                      
                              
                                </div>
                                <hr class="custom-line" />
                            </div>
                        }

                        
                    }
                    else
                    {
                        <p>No post available.</p>
                    }
                </ul>
            </div>
        </div>
    </div>

    <!-- THIS IS WHAT WE'RE TALKING ABOUT NOW end -->


    <!--CATEGORY START-->
    <!--The code defines a container that holds a grid of categories, each represented by a column. Each category is linked to a "CategoryDetails" page,
   where users can find more information about that specific category.-->
    <div class="container-xxl py-5">
        <div class="container">
            <div class="row align-items-start">
              

                <div class="col col-category">
                    <h2>
                        <a asp-controller="Category" asp-action="CategoryDetails" asp-route-id="1">Sport</a>
                       
                    </h2>
                </div>
                <div class="col col-category">
                    <h2>
                        <a asp-controller="Category" asp-action="CategoryDetails" asp-route-id="2">Data</a>
                    </h2>
                </div>
                <div class="col col-category">
                    <h2><a asp-controller="Category" asp-action="CategoryDetails" asp-route-id="3">Politics</a></h2>
                </div>
            </div>
            <div class="row align-items-center">
                <div class="col col-category">
                    <h2><a asp-controller="Category" asp-action="CategoryDetails" asp-route-id="4">Health</a></h2>
                </div>
                <div class="col col-category">
                    <h2><a asp-controller="Category" asp-action="CategoryDetails" asp-route-id="5">Job</a></h2>
                </div>
                <div class="col col-category">
                    <h2><a asp-controller="Category" asp-action="CategoryDetails" asp-route-id="6">Culture,Film and Music</a></h2>
                </div>
            </div>
            <div class="row">
                <div class="col col-category">
                    <h2><a asp-controller="Category" asp-action="CategoryDetails" asp-route-id="7">Mobile, tablets and smartwatches</a></h2>
                </div>
                <div class="col col-category">
                    <h2><a asp-controller="Category" asp-action="CategoryDetails" asp-route-id="8">Economics and law</a></h2>
                </div>
            </div>



        </div>
    </div>

    <!--CATEOGRY END--> 



    <!-- OUR CHOSEN ONE SECTION START-->

    <!--https://getbootstrap.com/docs/4.0/components/carousel/-->
    <!--The code creates a carousel that displays a series of items, each with an image, title, and description. Users can manually navigate through the 
    items using the "Previous" and "Next" buttons. The content in each item includes links to different sections of the website.-->

    <div>
        <h2 class="chosen-title">Our chosen ones</h2>

    </div>

    <div id="myCarousel" class="carousel carousel-fade" data-ride="carousel" data-interval="false">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <div class="d-flex justify-content-between">
                    <div class="chosen">
                        <a asp-controller="Topic" asp-action="TopicDetails" asp-route-id="1">
                            <img class="utvalgt-img" src="~/images/formula1.jpg" alt="Bildebeskrivelse">
                        </a>
                        <div class="chosen-content">
                            <h3 class="col col-c">
                                <a asp-controller="Post" asp-action="PostDetails" asp-route-id="17">Formula 1</a>
                            </h3>
                            <p>We are in the midst of a new season of F1. Join our thread.</p>

                            <ul class="list-unstyled d-flex align-items-center">
                                <li class="mr-2">
                                    <i class="fas fa-thumbs-up" style="color: green;"></i>
                                </li>
                                <li>
                                    <i class="fas fa-comment"></i>
                                    2 answer
                                </li>
                            </ul>


                            
                          
                        </div>
                    </div>
                    <div class="chosen">
                        <a asp-controller="Post" asp-action="PostDetails" asp-route-id="1">
                            <img class="utvalgt-img" src="~/images/fotball.jpg" alt="Bildebeskrivelse">
                        </a>
                        <div class="chosen-content">
                            <h3 class="col col-c">
                                <a asp-controller="Post" asp-action="PostDetails" asp-route-id="13">Premier League</a>
                            </h3>
                            <p>Join the football thread to discuss more about your favorite team.</p>
                            <ul class="list-unstyled d-flex align-items-center">
                                <li class="mr-2">
                                    <i class="fas fa-thumbs-up" style="color: green;"></i>
                                </li>
                                <li>
                                    <i class="fas fa-comment"></i>
                                    1 answer
                                </li>
                            </ul>

                        </div>
                    </div>
                    <div class="chosen">
                          <a asp-controller="Post" asp-action="PostDetails" asp-route-id="">
                        <img class="utvalgt-img" src="~/images/vacation.jpg" alt="Bildebeskrivelse">
                        </a>
                        <div class="chosen-content">
                            <h3 class="col col-c">
                                <a asp-controller="Post" asp-action="PostDetails" asp-route-id="14">Vacation</a>
                            </h3>
                            <p>Planning a vacation? Check out our tips and advice.</p>
                            <ul class="list-unstyled d-flex align-items-center">
                                <li class="mr-2">
                                    <i class="fas fa-thumbs-up" style="color: green;"></i>
                                </li>
                                <li>
                                    <i class="fas fa-comment"></i>
                                    2 answer
                                </li>
                            </ul>

                        </div>
                    </div>
                </div>
            </div>
            <div class="carousel-item">
                <div class="d-flex justify-content-between">
                    <div class="chosen">
                        <a asp-controller="Post" asp-action="PostDetails" asp-route-id="">
                            <img class="utvalgt-img" src="~/images/mosque.jpg" alt="Bildebeskrivelse">
                        </a>
                        <div class="chosen-content">
                            <h3 class="col col-c">
                                <a asp-controller="Post" asp-action="PostDetails" asp-route-id="8">The war between Palestine and Israel</a>
                            </h3>
                            <p>Palastine and Israel conflict, read more about here</p>
                            <ul class="list-unstyled d-flex align-items-center">
                                <li class="mr-2">
                                    <i class="fas fa-thumbs-up" style="color: green;"></i>
                                </li>
                                <li>
                                    <i class="fas fa-comment"></i>
                                   3 answer
                                </li>
                            </ul>

                        </div>
                    </div>
                    <div class="chosen">
                        <a asp-controller="Post" asp-action="PostDetails" asp-route-id="">
                            <img class="utvalgt-img" src="~/images/cyberS.jpg" alt="Bildebeskrivelse">
                        </a>
                        <div class="chosen-content">
                            <h3 class="col col-c">
                                <a asp-controller="Post" asp-action="PostDetails" asp-route-id="15">Cyber Threats</a>
                            </h3>                           
                            <p>join the debate</p>
                            <ul class="list-unstyled d-flex align-items-center">
                                <li class="mr-2">
                                    <i class="fas fa-thumbs-up" style="color: green;"></i>
                                </li>
                                <li>
                                    <i class="fas fa-comment"></i>
                                    3 svar
                                </li>
                            </ul>

                        </div>
                    </div>
                    <div class="chosen">
                        <a asp-controller="Post" asp-action="PostDetails" asp-route-id="">
                            <img class="utvalgt-img" src="~/images/skiEquipments.jpg" alt="Bildebeskrivelse">
                        </a>
                        <div class="chosen-content">
                            <h3 class="col col-c">
                                <a asp-controller="Post" asp-action="PostDetails" asp-route-id="11">Cross Country Skiing</a>
                            </h3>                           
                            <p>Equipment and maintenance</p>

                            <ul class="list-unstyled d-flex align-items-center">
                                <li class="mr-2">
                                    <i class="fas fa-thumbs-up" style="color: green;"></i>
                                </li>
                                <li>
                                    <i class="fas fa-comment"></i>
                                    3 answer
                                </li>
                            </ul>

                        </div>
                    </div>
                </div>
            </div>
        </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
    </div>


    <!--This JavaScript script within  is responsible for adding functionality to control a Bootstrap carousel.-->
    <script>
        //This is a jQuery function that ensures the code inside it runs when the entire document (HTML page) has finished loading.
        $(document).ready(function () {
            //creates a variable carousel that refers to all elements with the class "carousel ".
            var carousel = $('.carousel');

           //  Handles previous and next button clicks.
            $('.carousel-control-prev').click(function () {
                carousel.carousel('prev');
            });

            $('.carousel-control-next').click(function () {
                carousel.carousel('next');
            });
        });
    </script>

    <!--OUT CHOSEN ONE SECTION END-->


</body>
</html>




<!--A helper function FormatTime, which formats the time based on the difference between the post time and the current time. This helper function is used within the loop to display the timestamp for each post.-->
@functions {
    string FormatTime(DateTime postTime)
    {
        var timeDifference = DateTime.Now - postTime;

        if (timeDifference.Days >= 1)
        {
            if ((int)timeDifference.Days == 1)
            {
                return $"{(int)timeDifference.Days} day ago";
            }
            else
            {
                return $"{(int)timeDifference.Days} days ago";
            }
        }
        else if (timeDifference.Hours >= 1)
        {
            if ((int)timeDifference.Hours == 1)
            {
                return $"{(int)timeDifference.Hours} hour ago";
            }
            else
            {
                return $"{(int)timeDifference.Hours} hours ago";
            }
        }
        else if (timeDifference.Minutes >= 1)
        {
            if ((int)timeDifference.Minutes == 1)
            {
                return $"{(int)timeDifference.Minutes} minute ago";
            }
            else
            {
                return $"{(int)timeDifference.Minutes} minutes ago";
            }
        }
        else
        {
            if ((int)timeDifference.TotalSeconds == 1)
            {
                return $"{(int)timeDifference.Seconds} second ago";
            }
            else
            {
                return $"{(int)timeDifference.Seconds} seconds ago";
            }
        }
    }
}

